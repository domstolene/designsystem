{"version":3,"file":"useFocusTrap-754ba609.js","sources":["../../../../packages/components/src/hooks/useFocusTrap.tsx"],"sourcesContent":["import { RefObject, useEffect, useRef } from 'react';\nimport { getFocusableElements } from '../utils';\n\n/**\n * Fanger fokus i en loop inni et element. Typisk bruk:\n * ```\n * const MyComponent = (props) => {\n *\n *  const componentRef = useFocusTrap<HTMLDivElement>(props.isOpen);\n *\n *  return props.isOpen ? <div ref={componentRef}><button>click</button></div> : null;\n *\n * }\n * ```\n * @param active om focus skal fanges, f.eks. når en modal åpnes.\n * @returns ref til elementet som fanger fokus.\n */\n\nexport function useFocusTrap<T extends HTMLElement>(\n  active: boolean\n): RefObject<T> {\n  const elementRef = useRef<T>(null);\n\n  useEffect(() => {\n    function handleFocus(e: KeyboardEvent) {\n      if (e.key !== 'Tab' || !active || !elementRef.current) return;\n\n      const focusableElements = getFocusableElements(elementRef);\n      const firstElement = focusableElements[0];\n      const lastElement = focusableElements[focusableElements.length - 1];\n\n      if (!e.shiftKey && document.activeElement === lastElement) {\n        firstElement.focus();\n        e.preventDefault();\n      }\n\n      if (e.shiftKey && document.activeElement === firstElement) {\n        lastElement.focus();\n        e.preventDefault();\n      }\n    }\n\n    const element = elementRef.current;\n\n    if (element && active) {\n      element.focus();\n      element.addEventListener('keydown', handleFocus);\n    }\n\n    return () => {\n      element?.removeEventListener('keydown', handleFocus);\n    };\n  }, [active]);\n\n  return elementRef;\n}\n"],"names":["useFocusTrap","active","elementRef","useRef","useEffect","handleFocus","e","focusableElements","getFocusableElements","firstElement","lastElement","element"],"mappings":"6FAkBO,SAASA,EACdC,EACc,CACR,MAAAC,EAAaC,SAAU,IAAI,EAEjCC,OAAAA,EAAAA,UAAU,IAAM,CACd,SAASC,EAAYC,EAAkB,CACrC,GAAIA,EAAE,MAAQ,OAAS,CAACL,GAAU,CAACC,EAAW,QAAS,OAEjD,MAAAK,EAAoBC,EAAqBN,CAAU,EACnDO,EAAeF,EAAkB,CAAC,EAClCG,EAAcH,EAAkBA,EAAkB,OAAS,CAAC,EAE9D,CAACD,EAAE,UAAY,SAAS,gBAAkBI,IAC5CD,EAAa,MAAM,EACnBH,EAAE,eAAe,GAGfA,EAAE,UAAY,SAAS,gBAAkBG,IAC3CC,EAAY,MAAM,EAClBJ,EAAE,eAAe,EAErB,CAEA,MAAMK,EAAUT,EAAW,QAE3B,OAAIS,GAAWV,IACbU,EAAQ,MAAM,EACNA,EAAA,iBAAiB,UAAWN,CAAW,GAG1C,IAAM,CACFM,GAAA,MAAAA,EAAA,oBAAoB,UAAWN,EAAW,CACrD,EACC,CAACJ,CAAM,CAAC,EAEJC,CACT"}