{"version":3,"file":"TextArea.stories-c457d384.js","sources":["../../../../packages/components/src/components/TextArea/TextArea.tokens.tsx","../../../../packages/components/src/components/TextArea/TextArea.tsx"],"sourcesContent":["import { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\n\nconst { spacing } = ddsBaseTokens;\n\nconst textarea = {\n  paddingBottom: spacing.SizesDdsSpacingLocalX05,\n};\n\nexport const textAreaTokens = {\n  textarea,\n};\n","import {\n  forwardRef,\n  TextareaHTMLAttributes,\n  useEffect,\n  useId,\n  useRef,\n  useState,\n} from 'react';\nimport styled from 'styled-components';\nimport {\n  getDefaultText,\n  OuterInputContainer,\n  StatefulInput,\n  StyledInputProps,\n  CommonInputProps,\n  renderInputMessage,\n  inputTypographyTypes,\n} from '../../helpers/Input';\nimport { useCombinedRef } from '../../hooks';\nimport {\n  derivativeIdGenerator,\n  spaceSeparatedIdListGenerator,\n} from '../../utils';\nimport { scrollbarStyling } from '../ScrollableContainer';\nimport { Label } from '../Typography';\nimport { textAreaTokens } from './TextArea.tokens';\nimport { Property } from 'csstype';\nimport { getFontStyling } from '../Typography/Typography.utils';\n\nconst defaultWidth: Property.Width<string> = '320px';\nconst { textarea } = textAreaTokens;\n\nexport const StyledTextArea = styled(StatefulInput)<StyledInputProps>`\n  ${scrollbarStyling.webkit}\n  ${scrollbarStyling.firefox}\n  height: auto;\n  resize: vertical;\n  vertical-align: bottom;\n  padding-bottom: ${textarea.paddingBottom};\n  ${getFontStyling(inputTypographyTypes.medium)}\n`;\n\nexport type TextAreaProps = CommonInputProps &\n  TextareaHTMLAttributes<HTMLTextAreaElement>;\n\nexport const TextArea = forwardRef<HTMLTextAreaElement, TextAreaProps>(\n  (props, ref) => {\n    const {\n      id,\n      value,\n      defaultValue,\n      onChange,\n      errorMessage,\n      required,\n      disabled,\n      tip,\n      label,\n      'aria-required': ariaRequired,\n      'aria-describedby': ariaDescribedby,\n      className,\n      style,\n      width = defaultWidth,\n      ...rest\n    } = props;\n\n    const generatedId = useId();\n    const uniqueId = id ?? `${generatedId}-textArea`;\n\n    const textAreaRef = useRef<HTMLTextAreaElement>(null);\n    const multiRef = useCombinedRef(ref, textAreaRef);\n    const [text, setText] = useState<string>(\n      getDefaultText(value, defaultValue)\n    );\n\n    useEffect(() => {\n      if (textAreaRef && textAreaRef.current) {\n        textAreaRef.current.style.height = `${\n          textAreaRef.current.scrollHeight + 2\n        }px`;\n      }\n    }, [text]);\n\n    const onChangeHandler: React.ChangeEventHandler<HTMLTextAreaElement> = (\n      event: React.ChangeEvent<HTMLTextAreaElement>\n    ) => {\n      setText(event.target.value);\n\n      if (onChange) {\n        onChange(event);\n      }\n    };\n\n    const hasErrorMessage = !!errorMessage;\n    const hasLabel = !!label;\n    const tipId = derivativeIdGenerator(uniqueId, 'tip');\n    const errorMessageId = derivativeIdGenerator(uniqueId, 'errorMessage');\n\n    const showRequiredStyling = required || !!ariaRequired;\n\n    const containerProps = {\n      width,\n      className,\n      style,\n    };\n\n    const textAreaProps = {\n      ref: multiRef,\n      onChange: onChangeHandler,\n      value,\n      defaultValue,\n      id: uniqueId,\n      disabled,\n      hasErrorMessage,\n      required,\n      'aria-required': ariaRequired,\n      'aria-describedby': spaceSeparatedIdListGenerator([\n        tip ? tipId : undefined,\n        errorMessage ? errorMessageId : undefined,\n        ariaDescribedby,\n      ]),\n      'aria-invalid': hasErrorMessage ? true : undefined,\n      ...rest,\n    };\n\n    return (\n      <OuterInputContainer {...containerProps}>\n        {hasLabel && (\n          <Label showRequiredStyling={showRequiredStyling} htmlFor={uniqueId}>\n            {label}\n          </Label>\n        )}\n        <StyledTextArea {...textAreaProps} as=\"textarea\" />\n        {renderInputMessage(tip, tipId, errorMessage, errorMessageId)}\n      </OuterInputContainer>\n    );\n  }\n);\n\nTextArea.displayName = 'TextArea';\n"],"names":["spacing","ddsBaseTokens","textarea","textAreaTokens","defaultWidth","StyledTextArea","styled","StatefulInput","scrollbarStyling","getFontStyling","inputTypographyTypes","TextArea","forwardRef","props","ref","id","value","defaultValue","onChange","errorMessage","required","disabled","tip","label","ariaRequired","ariaDescribedby","className","style","width","rest","generatedId","useId","uniqueId","textAreaRef","useRef","multiRef","useCombinedRef","text","setText","useState","getDefaultText","useEffect","onChangeHandler","event","hasErrorMessage","hasLabel","tipId","derivativeIdGenerator","errorMessageId","showRequiredStyling","containerProps","textAreaProps","spaceSeparatedIdListGenerator","jsxs","OuterInputContainer","jsx","Label","renderInputMessage"],"mappings":"2jBAEA,KAAM,CAAE,QAAAA,EAAY,EAAAC,EAEdC,GAAW,CACf,cAAeF,GAAQ,uBACzB,EAEaG,GAAiB,CAAA,SAC5BD,EACF,ECmBME,GAAuC,QACvC,CAAE,SAAAF,EAAa,EAAAC,GAERE,GAAiBC,EAAOC,EAAa;AAAA,IAC9CC,EAAiB;AAAA,IACjBA,EAAiB;AAAA;AAAA;AAAA;AAAA,oBAIDN,GAAS;AAAA,IACzBO,EAAeC,GAAqB,MAAM;AAAA,EAMjCC,EAAWC,EAAA,WACtB,CAACC,EAAOC,IAAQ,CACR,KAAA,CACJ,GAAAC,EACA,MAAAC,EACA,aAAAC,EACA,SAAAC,EACA,aAAAC,EACA,SAAAC,EACA,SAAAC,EACA,IAAAC,EACA,MAAAC,EACA,gBAAiBC,EACjB,mBAAoBC,EACpB,UAAAC,EACA,MAAAC,EACA,MAAAC,EAAQxB,GACR,GAAGyB,CACD,EAAAhB,EAEEiB,EAAcC,EAAAA,QACdC,EAAWjB,GAAM,GAAGe,aAEpBG,EAAcC,SAA4B,IAAI,EAC9CC,EAAWC,GAAetB,EAAKmB,CAAW,EAC1C,CAACI,EAAMC,CAAO,EAAIC,EAAA,SACtBC,GAAexB,EAAOC,CAAY,CAAA,EAGpCwB,EAAAA,UAAU,IAAM,CACVR,GAAeA,EAAY,UAC7BA,EAAY,QAAQ,MAAM,OAAS,GACjCA,EAAY,QAAQ,aAAe,MAEvC,EACC,CAACI,CAAI,CAAC,EAEH,MAAAK,EACJC,GACG,CACKL,EAAAK,EAAM,OAAO,KAAK,EAEtBzB,GACFA,EAASyB,CAAK,CAChB,EAGIC,EAAkB,CAAC,CAACzB,EACpB0B,EAAW,CAAC,CAACtB,EACbuB,EAAQC,EAAsBf,EAAU,KAAK,EAC7CgB,EAAiBD,EAAsBf,EAAU,cAAc,EAE/DiB,EAAsB7B,GAAY,CAAC,CAACI,EAEpC0B,EAAiB,CACrB,MAAAtB,EACA,UAAAF,EACA,MAAAC,CAAA,EAGIwB,EAAgB,CACpB,IAAKhB,EACL,SAAUO,EACV,MAAA1B,EACA,aAAAC,EACA,GAAIe,EACJ,SAAAX,EACA,gBAAAuB,EACA,SAAAxB,EACA,gBAAiBI,EACjB,mBAAoB4B,GAA8B,CAChD9B,EAAMwB,EAAQ,OACd3B,EAAe6B,EAAiB,OAChCvB,CAAA,CACD,EACD,eAAgBmB,EAAkB,GAAO,OACzC,GAAGf,CAAA,EAIH,OAAAwB,EAACC,GAAqB,CAAA,GAAGJ,EACtB,SAAA,CAAAL,GACEU,EAAAC,GAAA,CAAM,oBAAAP,EAA0C,QAASjB,EACvD,SACHT,EAAA,EAEDgC,EAAAlD,GAAA,CAAgB,GAAG8C,EAAe,GAAG,UAAW,CAAA,EAChDM,GAAmBnC,EAAKwB,EAAO3B,EAAc6B,CAAc,CAC9D,CAAA,CAAA,CAEJ,CACF,EAEArC,EAAS,YAAc;;;;;;;;;;;;;;;;;;;;;;;"}