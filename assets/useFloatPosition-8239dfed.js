import{c as U,a as B,b as V,o as X,f as G,s as H}from"./floating-ui.dom-a5fd4560.js";import{r as o}from"./index-1b03fe98.js";import{r as I}from"./index-6fd5a17b.js";import{d as J}from"./ddsReferenceTokens-cf345c8b.js";const K=e=>{function n(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:e,fn(t){const{element:r,padding:f}=typeof e=="function"?e(t):e;return r&&n(r)?r.current!=null?B({element:r.current,padding:f}).fn(t):{}:r?B({element:r,padding:f}).fn(t):{}}}};var M=typeof document<"u"?o.useLayoutEffect:o.useEffect;function E(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let t,r,f;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(r=t;r--!==0;)if(!E(e[r],n[r]))return!1;return!0}if(f=Object.keys(e),t=f.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(n,f[r]))return!1;for(r=t;r--!==0;){const i=f[r];if(!(i==="_owner"&&e.$$typeof)&&!E(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}function z(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function T(e,n){const t=z(e);return Math.round(n*t)/t}function q(e){const n=o.useRef(e);return M(()=>{n.current=e}),n}function Q(e){e===void 0&&(e={});const{placement:n="bottom",strategy:t="absolute",middleware:r=[],platform:f,elements:{reference:i,floating:D}={},transform:h=!0,whileElementsMounted:x,open:g}=e,[a,R]=o.useState({x:0,y:0,strategy:t,placement:n,middlewareData:{},isPositioned:!1}),[y,k]=o.useState(r);E(y,r)||k(r);const[b,_]=o.useState(null),[N,C]=o.useState(null),L=o.useCallback(s=>{s!=m.current&&(m.current=s,_(s))},[_]),$=o.useCallback(s=>{s!==d.current&&(d.current=s,C(s))},[C]),c=i||b,u=D||N,m=o.useRef(null),d=o.useRef(null),P=o.useRef(a),F=q(x),O=q(f),w=o.useCallback(()=>{if(!m.current||!d.current)return;const s={placement:n,strategy:t,middleware:y};O.current&&(s.platform=O.current),U(m.current,d.current,s).then(S=>{const p={...S,isPositioned:!0};A.current&&!E(P.current,p)&&(P.current=p,I.flushSync(()=>{R(p)}))})},[y,n,t,O]);M(()=>{g===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,R(s=>({...s,isPositioned:!1})))},[g]);const A=o.useRef(!1);M(()=>(A.current=!0,()=>{A.current=!1}),[]),M(()=>{if(c&&(m.current=c),u&&(d.current=u),c&&u){if(F.current)return F.current(c,u,w);w()}},[c,u,w,F]);const j=o.useMemo(()=>({reference:m,floating:d,setReference:L,setFloating:$}),[L,$]),l=o.useMemo(()=>({reference:c,floating:u}),[c,u]),v=o.useMemo(()=>{const s={position:t,left:0,top:0};if(!l.floating)return s;const S=T(l.floating,a.x),p=T(l.floating,a.y);return h?{...s,transform:"translate("+S+"px, "+p+"px)",...z(l.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:S,top:p}},[t,h,l.floating,a.x,a.y]);return o.useMemo(()=>({...a,update:w,refs:j,elements:l,floatingStyles:v}),[a,w,j,l,v])}const W=J.spacing.SizesDdsSpacingLocalX05NumberPx,oe=(e,n={})=>{const{animationFrame:t=!0,offset:r=W,placement:f="bottom"}=n,i=[X(r),G(),H(),...e?[K({element:e})]:[]],{x:D,y:h,strategy:x,middlewareData:g,placement:a,refs:R}=Q({placement:f,middleware:i,whileElementsMounted:(y,k,b)=>V(y,k,b,{animationFrame:t})});return{refs:R,styles:{floating:{position:x,top:h??"",left:D??""},arrow:g.arrow?Y(x,a,g.arrow):void 0}}};function Y(e,n,t){const r=Z(n),f={top:"-15px",bottom:"-15px",right:"-21px",left:"-21px"}[r],i={top:"rotate(180deg)",right:"rotate(-90deg)",bottom:"",left:"rotate(90deg)"}[r];return{position:e,top:(t==null?void 0:t.y)??"",left:(t==null?void 0:t.x)??"",[r]:f,transform:i}}function Z(e){switch(e){case"top":case"top-start":case"top-end":return"bottom";case"bottom":case"bottom-start":case"bottom-end":return"top";case"left":case"left-start":case"left-end":return"right";case"right":case"right-start":case"right-end":return"left"}}export{oe as u};
//# sourceMappingURL=useFloatPosition-8239dfed.js.map
