{"version":3,"file":"OverflowMenuItem-7e972be0.js","sources":["../../../../packages/components/src/components/OverflowMenu/OverflowMenu.tokens.tsx","../../../../packages/components/src/components/OverflowMenu/OverflowMenuItem.tsx"],"sourcesContent":["import { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\nimport { calculateHeightWithLineHeight } from '@norges-domstoler/dds-core';\nimport { StaticTypographyType } from '@norges-domstoler/dds-typography';\n\nconst { border, borderRadius, colors, spacing, fontPackages } = ddsBaseTokens;\n\nexport const typographyType: StaticTypographyType = 'bodySans01';\n\nconst element = {\n  base: {\n    color: colors.DdsColorNeutralsGray9,\n    textDecoration: 'none',\n    backgroundColor: colors.DdsColorNeutralsWhite,\n    padding: `${spacing.SizesDdsSpacingLocalX075} ${spacing.SizesDdsSpacingLocalX1}`,\n    gap: spacing.SizesDdsSpacingLocalX025,\n  },\n};\n\nconst iconHeight = calculateHeightWithLineHeight(\n  fontPackages.body_sans_01.numbers.lineHeightNumber,\n  fontPackages.body_sans_01.numbers.fontSizeNumber\n);\n\nconst link = {\n  iconWrapper: {\n    height: `${iconHeight}px`,\n  },\n  hover: {\n    backgroundColor: colors.DdsColorInteractiveLightest,\n  },\n  active: {\n    backgroundColor: colors.DdsColorInteractiveLightest,\n  },\n};\n\nconst container = {\n  border: `${border.BordersDdsBorderStyleLightStrokeWeight} ${border.BordersDdsBorderStyleLightStroke} solid `,\n  backgroundColor: colors.DdsColorNeutralsWhite,\n  borderRadius: borderRadius.RadiiDdsBorderRadius1Radius,\n};\n\nconst divider = {\n  marginRight: spacing.SizesDdsSpacingLocalX15,\n  marginLeft: spacing.SizesDdsSpacingLocalX15,\n};\n\nexport const overflowMenuTokens = {\n  container,\n  element,\n  link,\n  divider,\n  offset: spacing.SizesDdsSpacingLocalX0125NumberPx,\n};\n","import {\n  AnchorHTMLAttributes,\n  ButtonHTMLAttributes,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n  Dispatch,\n  SetStateAction,\n  MouseEvent,\n  KeyboardEvent,\n  ForwardedRef,\n} from 'react';\nimport styled, { css } from 'styled-components';\nimport {\n  overflowMenuTokens as tokens,\n  typographyType,\n} from './OverflowMenu.tokens';\nimport { Icon } from '@norges-domstoler/dds-icons';\nimport { useCombinedRef } from '@norges-domstoler/dds-core';\nimport {\n  BaseComponentProps,\n  getBaseHTMLProps,\n} from '@norges-domstoler/dds-core';\nimport { SvgIcon } from '@norges-domstoler/dds-icons';\nimport { normalizeButton } from '@norges-domstoler/dds-core';\nimport {\n  focusVisibleLink,\n  getFontStyling,\n} from '@norges-domstoler/dds-typography';\n\nconst { element, link } = tokens;\n\nconst elementBaseCSS = css`\n  display: flex;\n  box-sizing: border-box;\n  color: ${element.base.color};\n  text-decoration: ${element.base.textDecoration};\n  background-color: ${element.base.backgroundColor};\n  padding: ${element.base.padding};\n  gap: ${element.base.gap};\n  ${getFontStyling(typographyType)}\n`;\n\nexport const Span = styled.span`\n  ${elementBaseCSS}\n`;\n\nexport const Link = styled.a`\n  ${normalizeButton}\n  text-align: left;\n  user-select: text;\n  border: none;\n  cursor: pointer;\n  outline: inherit;\n  width: 100%;\n  ${elementBaseCSS}\n  @media (prefers-reduced-motion: no-preference) {\n    transition: background-color 0.2s;\n  }\n  &:hover {\n    background-color: ${link.hover.backgroundColor};\n  }\n  &:active {\n    background-color: ${link.active.backgroundColor};\n  }\n  &:focus-visible,\n  &.focus-visible {\n    ${focusVisibleLink}\n  }\n`;\n\nconst IconWrapper = styled.span`\n  display: flex;\n  align-items: center;\n  height: ${link.iconWrapper.height};\n`;\n\ntype BaseOverflowMenuItemProps = {\n  title: string;\n  icon?: SvgIcon;\n  focus?: boolean;\n  setFocus?: Dispatch<SetStateAction<number>>;\n  index?: number;\n  isMenuClosed?: boolean;\n};\n\ntype AnchorOverflowMenuItemProps = BaseOverflowMenuItemProps &\n  BaseComponentProps<\n    HTMLAnchorElement,\n    {\n      href?: string;\n    },\n    AnchorHTMLAttributes<HTMLAnchorElement>\n  >;\n\ntype ButtonOverflowMenuItemProps = BaseOverflowMenuItemProps &\n  BaseComponentProps<\n    HTMLButtonElement,\n    Pick<ButtonHTMLAttributes<HTMLButtonElement>, 'onClick'>,\n    ButtonHTMLAttributes<HTMLButtonElement>\n  >;\n\ntype OtherOverflowMenuItemProps = BaseOverflowMenuItemProps &\n  BaseComponentProps<HTMLSpanElement>;\n\nexport type OverflowMenuItemProps =\n  | AnchorOverflowMenuItemProps\n  | ButtonOverflowMenuItemProps\n  | OtherOverflowMenuItemProps;\n\nconst isAnchorProps = (\n  props: OverflowMenuItemProps\n): props is AnchorOverflowMenuItemProps =>\n  (props as AnchorOverflowMenuItemProps).href !== undefined;\n\nconst isButtonProps = (\n  props: OverflowMenuItemProps\n): props is ButtonOverflowMenuItemProps =>\n  (props as AnchorOverflowMenuItemProps).href === undefined &&\n  (props as ButtonOverflowMenuItemProps).onClick !== undefined;\n\nexport const OverflowMenuItem = forwardRef<\n  HTMLAnchorElement,\n  OverflowMenuItemProps\n>((props, ref) => {\n  const {\n    title,\n    icon,\n    focus,\n    setFocus,\n    index,\n    id,\n    className,\n    htmlProps = {},\n    ...rest\n  } = props;\n\n  const { onKeyDown } = htmlProps;\n\n  let href: AnchorOverflowMenuItemProps['href'];\n  let onClick: ButtonOverflowMenuItemProps['onClick'];\n  if (isAnchorProps(props)) {\n    href = props.href;\n  } else if (isButtonProps(props)) {\n    onClick = props.onClick;\n  }\n\n  const itemRef = useRef<HTMLAnchorElement | HTMLButtonElement>(null);\n  const combinedRef = useCombinedRef(ref, itemRef);\n\n  useEffect(() => {\n    if (focus) {\n      itemRef.current?.focus();\n    }\n  }, [focus]);\n\n  const handleSelect = useCallback(() => {\n    if (setFocus && index) {\n      setFocus(index);\n    }\n  }, [index, setFocus]);\n\n  const handleOnClick = (\n    e: MouseEvent<HTMLAnchorElement> & MouseEvent<HTMLButtonElement>\n  ) => {\n    handleSelect();\n    onClick && onClick(e);\n  };\n\n  const handleOnKeyDown = (\n    e: KeyboardEvent<HTMLAnchorElement> & KeyboardEvent<HTMLButtonElement>\n  ) => {\n    handleSelect();\n    onKeyDown && onKeyDown(e);\n  };\n\n  const linkProps = {\n    href,\n    onClick: handleOnClick,\n    onKeyDown: handleOnKeyDown,\n    role: 'menuitem',\n    tabIndex: focus ? 0 : -1,\n  };\n  const iconElement = icon && <Icon iconSize=\"inherit\" icon={icon} />;\n\n  if (!href && !onClick) {\n    return (\n      <Span {...{ ...getBaseHTMLProps(id, className, htmlProps, rest), ref }}>\n        <IconWrapper>{iconElement}</IconWrapper>\n        {title}\n      </Span>\n    );\n  }\n\n  if (!href) {\n    return (\n      <Link\n        {...getBaseHTMLProps(id, className, htmlProps, rest)}\n        {...linkProps}\n        as=\"button\"\n        ref={combinedRef as ForwardedRef<HTMLButtonElement>}\n      >\n        <IconWrapper>{iconElement}</IconWrapper>\n        {title}\n      </Link>\n    );\n  }\n\n  return (\n    <Link\n      {...getBaseHTMLProps(id, className, htmlProps, rest)}\n      {...linkProps}\n      as=\"a\"\n      ref={combinedRef as ForwardedRef<HTMLAnchorElement>}\n    >\n      <IconWrapper>{iconElement}</IconWrapper>\n      {title}\n    </Link>\n  );\n});\n\nOverflowMenuItem.displayName = 'OverflowMenuItem';\n"],"names":["border","borderRadius","colors","spacing","fontPackages","ddsBaseTokens","typographyType","element","iconHeight","calculateHeightWithLineHeight","link","container","divider","overflowMenuTokens","tokens","elementBaseCSS","css","getFontStyling","Span","styled","Link","normalizeButton","focusVisibleLink","IconWrapper","isAnchorProps","props","isButtonProps","OverflowMenuItem","forwardRef","ref","title","icon","focus","setFocus","index","id","className","htmlProps","rest","onKeyDown","href","onClick","itemRef","useRef","combinedRef","useCombinedRef","useEffect","_a","handleSelect","useCallback","linkProps","e","iconElement","jsx","Icon","jsxs","getBaseHTMLProps"],"mappings":"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"}