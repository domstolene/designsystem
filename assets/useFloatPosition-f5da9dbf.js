import{c as C,a as j,b as _,o as v,f as T,s as q}from"./floating-ui.dom-a5fd4560.js";import{r as s}from"./index-1b03fe98.js";import{r as z}from"./index-6fd5a17b.js";import{d as B}from"./ddsReferenceTokens-ceb64027.js";const N=e=>{const{element:t,padding:r}=e;function n(o){return Object.prototype.hasOwnProperty.call(o,"current")}return{name:"arrow",options:e,fn(o){return n(t)?t.current!=null?j({element:t.current,padding:r}).fn(o):{}:t?j({element:t,padding:r}).fn(o):{}}}};var b=typeof document<"u"?s.useLayoutEffect:s.useEffect;function M(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!M(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){const c=o[n];if(!(c==="_owner"&&e.$$typeof)&&!M(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}function A(e){const t=s.useRef(e);return b(()=>{t.current=e}),t}function U(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,whileElementsMounted:c,open:w}=e,[m,P]=s.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,R]=s.useState(n);M(p,n)||R(n);const u=s.useRef(null),a=s.useRef(null),l=s.useRef(m),d=A(c),g=A(o),[i,F]=s.useState(null),[y,L]=s.useState(null),x=s.useCallback(f=>{u.current!==f&&(u.current=f,F(f))},[]),S=s.useCallback(f=>{a.current!==f&&(a.current=f,L(f))},[]),h=s.useCallback(()=>{if(!u.current||!a.current)return;const f={placement:t,strategy:r,middleware:p};g.current&&(f.platform=g.current),C(u.current,a.current,f).then($=>{const E={...$,isPositioned:!0};k.current&&!M(l.current,E)&&(l.current=E,z.flushSync(()=>{P(E)}))})},[p,t,r,g]);b(()=>{w===!1&&l.current.isPositioned&&(l.current.isPositioned=!1,P(f=>({...f,isPositioned:!1})))},[w]);const k=s.useRef(!1);b(()=>(k.current=!0,()=>{k.current=!1}),[]),b(()=>{if(i&&y){if(d.current)return d.current(i,y,h);h()}},[i,y,h,d]);const O=s.useMemo(()=>({reference:u,floating:a,setReference:x,setFloating:S}),[x,S]),D=s.useMemo(()=>({reference:i,floating:y}),[i,y]);return s.useMemo(()=>({...m,update:h,refs:O,elements:D,reference:x,floating:S}),[m,h,O,D,x,S])}const X=B.spacing.SizesDdsSpacingLocalX05NumberPx,V=(e,t={})=>{const{animationFrame:r=!0,offset:n=X,placement:o="bottom"}=t,c=[v(n),T(),q(),...e?[N({element:e})]:[]],{x:w,y:m,reference:P,floating:p,strategy:R,middlewareData:u,placement:a,refs:l}=U({placement:o,middleware:c,whileElementsMounted:(d,g,i)=>_(d,g,i,{animationFrame:r})});return{reference:P,floating:p,refs:l,styles:{floating:{position:R,top:m??"",left:w??""},arrow:u.arrow?G(R,a,u.arrow):void 0}}};function G(e,t,r){const n=H(t),o={top:"-15px",bottom:"-15px",right:"-21px",left:"-21px"}[n],c={top:"rotate(180deg)",right:"rotate(-90deg)",bottom:"",left:"rotate(90deg)"}[n];return{position:e,top:(r==null?void 0:r.y)??"",left:(r==null?void 0:r.x)??"",[n]:o,transform:c}}function H(e){switch(e){case"top":case"top-start":case"top-end":return"bottom";case"bottom":case"bottom-start":case"bottom-end":return"top";case"left":case"left-start":case"left-end":return"right";case"right":case"right-start":case"right-end":return"left"}}export{V as u};
//# sourceMappingURL=useFloatPosition-f5da9dbf.js.map
