{"version":3,"file":"Datepicker-1f87b594.js","sources":["../../../../packages/components/src/components/Datepicker/calendar_today.svg","../../../../packages/components/src/components/Datepicker/Datepicker.tokens.tsx","../../../../packages/components/src/components/Datepicker/Datepicker.tsx"],"sourcesContent":["export default \"__VITE_ASSET__387df22d__\"","import { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\n\nconst { iconSizes, spacing, border } = ddsBaseTokens;\n\nconst calendarIndicator = {\n  base: {\n    sizes: {\n      medium: {\n        height: iconSizes.DdsIconsizeMedium,\n        width: iconSizes.DdsIconsizeMedium,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n      small: {\n        height: iconSizes.DdsIconsizeSmall,\n        width: iconSizes.DdsIconsizeSmall,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n      tiny: {\n        height: iconSizes.DdsIconsizeSmall,\n        width: iconSizes.DdsIconsizeSmall,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n    },\n  },\n  focus: {\n    outline: `${border.BordersDdsBorderFocusInputfieldStroke} solid ${border.BordersDdsBorderFocusInputfieldStrokeWeight}`,\n    outlineOffset: spacing.SizesDdsSpacingLocalX0125,\n  },\n};\n\nexport const datepickerTokens = {\n  calendarIndicator,\n};\n","import { forwardRef, useId } from 'react';\nimport {\n  derivativeIdGenerator,\n  spaceSeparatedIdListGenerator,\n  selection,\n} from '@norges-domstoler/dds-core';\nimport { Label } from '@norges-domstoler/dds-typography';\nimport { Property } from 'csstype';\nimport styled, { css } from 'styled-components';\nimport CalendarIcon from './calendar_today.svg';\nimport {\n  StatefulInput,\n  OuterInputContainer,\n  InputSize,\n  InputProps,\n} from '@norges-domstoler/dds-form';\n\nimport { datepickerTokens as tokens } from './Datepicker.tokens';\nimport { renderInputMessage } from '../../utils/renderInputMessage';\n\nconst StyledInput = styled(StatefulInput)`\n  &::-webkit-calendar-picker-indicator {\n    background-image: ${`url('${CalendarIcon}')`};\n    position: absolute;\n    ${({ componentSize }) =>\n      componentSize &&\n      css`\n        right: ${tokens.calendarIndicator.base.sizes[componentSize].right};\n        height: ${tokens.calendarIndicator.base.sizes[componentSize].height};\n        width: ${tokens.calendarIndicator.base.sizes[componentSize].width};\n      `}\n    margin-left: 0px;\n    padding: 0;\n    top: 50%;\n    transform: translate(0, -50%);\n    box-sizing: border-box;\n  }\n\n  &::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n\n  &::-webkit-calendar-picker-indicator:focus-visible {\n    outline: ${tokens.calendarIndicator.focus.outline};\n    outline-offset: ${tokens.calendarIndicator.focus.outlineOffset};\n  }\n\n  &::-webkit-inner-spin-button {\n    display: none;\n  }\n\n  @media (prefers-reduced-motion: no-preference) {\n    ::-webkit-datetime-edit-day-field,\n    ::-webkit-datetime-edit-month-field,\n    ::-webkit-datetime-edit-year-field,\n    ::-webkit-datetime-edit-hour-field,\n    ::-webkit-datetime-edit-minute-field {\n      transition: 0.2s;\n    }\n  }\n\n  &::-webkit-datetime-edit-day-field:focus,\n  &::-webkit-datetime-edit-month-field:focus,\n  &::-webkit-datetime-edit-year-field:focus,\n  &::-webkit-datetime-edit-hour-field:focus,\n  &::-webkit-datetime-edit-minute-field:focus {\n    ${selection}\n  }\n`;\n\ntype DatepickerType = 'date' | 'datetime-local';\n\nexport type DatepickerProps = Omit<InputProps, 'type'> & {\n  /** Angi dato-input med eller uten klokkeslett. */\n  type?: DatepickerType;\n};\n\nexport const Datepicker = forwardRef<HTMLInputElement, DatepickerProps>(\n  (\n    {\n      id,\n      type = 'date',\n      required,\n      readOnly,\n      disabled,\n      label,\n      width,\n      errorMessage,\n      tip,\n      style,\n      className,\n      componentSize = 'medium',\n      max,\n      'aria-required': ariaRequired,\n      'aria-describedby': ariaDescribedby,\n      ...rest\n    },\n    ref\n  ) => {\n    const generatedId = useId();\n    const uniqueId = id ?? `${generatedId}-datepickerInput`;\n\n    const componentWidth = width ? width : getWidth(type, componentSize);\n    const hasLabel = !!label;\n    const hasErrorMessage = !!errorMessage;\n    const showRequiredStyling = !!(required || ariaRequired);\n\n    const errorMessageId = derivativeIdGenerator(uniqueId, 'errorMessage');\n    const tipId = derivativeIdGenerator(uniqueId, 'tip');\n\n    const inputProps = {\n      id: uniqueId,\n      hasErrorMessage,\n      ref,\n      readOnly,\n      tabIndex: readOnly ? -1 : 0,\n      required,\n      disabled,\n      componentSize,\n      type,\n      'aria-describedby': spaceSeparatedIdListGenerator([\n        tip ? tipId : undefined,\n        errorMessage ? errorMessageId : undefined,\n        ariaDescribedby,\n      ]),\n      'aria-required': ariaRequired,\n      'aria-invalid': hasErrorMessage ? true : undefined,\n      max: getMax(type, max),\n      ...rest,\n    };\n\n    const outerinputContainerProps = {\n      width: componentWidth,\n      style,\n      className,\n    };\n\n    return (\n      <OuterInputContainer {...outerinputContainerProps}>\n        {hasLabel && (\n          <Label htmlFor={uniqueId} showRequiredStyling={showRequiredStyling}>\n            {label}\n          </Label>\n        )}\n        <StyledInput {...inputProps} />\n        {renderInputMessage(tip, tipId, errorMessage, errorMessageId)}\n      </OuterInputContainer>\n    );\n  }\n);\nDatepicker.displayName = 'Datepicker';\n\nconst defaultWidths: {\n  [k in DatepickerType]: { [k in InputSize]: Property.Width<string> };\n} = {\n  date: {\n    medium: '160px',\n    small: '140px',\n    tiny: '125px',\n  },\n  ['datetime-local']: {\n    medium: '200px',\n    small: '180px',\n    tiny: '150px',\n  },\n};\n\nconst getWidth = (\n  type: DatepickerType,\n  size: InputSize\n): Property.Width<string> => defaultWidths[type][size];\n\nconst getMax = (\n  type: DatepickerType,\n  max?: string | number\n): string | number | undefined => {\n  if (max !== undefined) {\n    return max;\n  }\n\n  // Limit the year-part to only four digits by default\n\n  if (type === 'datetime-local') {\n    return '9999-12-31T23:59';\n  }\n\n  if (type === 'date') {\n    return '9999-12-31';\n  }\n};\n"],"names":["CalendarIcon","iconSizes","spacing","border","ddsBaseTokens","calendarIndicator","datepickerTokens","StyledInput","styled","StatefulInput","componentSize","css","tokens","selection","Datepicker","forwardRef","id","type","required","readOnly","disabled","label","width","errorMessage","tip","style","className","max","ariaRequired","ariaDescribedby","rest","ref","generatedId","useId","uniqueId","componentWidth","getWidth","hasLabel","hasErrorMessage","showRequiredStyling","errorMessageId","derivativeIdGenerator","tipId","inputProps","spaceSeparatedIdListGenerator","getMax","jsxs","OuterInputContainer","jsx","Label","renderInputMessage","defaultWidths","size"],"mappings":"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"}