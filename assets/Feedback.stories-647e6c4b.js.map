{"version":3,"file":"Feedback.stories-647e6c4b.js","sources":["../../../../packages/components/src/components/Feedback/FlexContainer.tsx","../../../../packages/components/src/components/Feedback/RatingComponent.tsx","../../../../packages/components/src/components/Feedback/CommentComponent.tsx","../../../../packages/components/src/components/Feedback/Feedback.tsx"],"sourcesContent":["import { CSSProperties } from 'react';\nimport styled, { css } from 'styled-components';\nimport { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\n\ntype FlexContainerProps = {\n  flexDirection: CSSProperties['flexDirection'];\n};\n\nexport const FlexContainer = styled.div<FlexContainerProps>`\n  display: flex;\n  ${({ flexDirection }) => css`\n    flex-direction: ${flexDirection};\n    gap: ${ddsBaseTokens.spacing.SizesDdsSpacingLocalX1};\n  `};\n`;\n","import styled, { css } from 'styled-components';\nimport { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\nimport { Thumbup, Thumbdown } from '@norges-domstoler/dds-icons';\nimport { Label } from '@norges-domstoler/dds-typography';\n\nimport { Layout, Rating } from './Feedback.types';\nimport { Spinner } from '../Spinner';\nimport { Tooltip } from '../Tooltip';\nimport { Button } from '../Button';\nimport { FlexContainer } from './FlexContainer';\n\ntype RatingContainerProps = {\n  layout: Layout;\n};\n\nconst RatingContainer = styled.div<RatingContainerProps>`\n  display: flex;\n  gap: ${ddsBaseTokens.spacing.SizesDdsSpacingLocalX1};\n  ${({ layout }) => css`\n    flex-direction: ${layout === 'horizontal' ? 'row' : 'column'};\n    align-items: ${layout === 'horizontal' ? 'center' : 'start'};\n  `}\n`;\n\nconst RatingButton = styled(Button)`\n  padding: 0px;\n  color: ${ddsBaseTokens.colors.DdsColorNeutralsGray7};\n`;\n\ntype RatingComponentType = {\n  layout: Layout;\n  ratingLabel: string;\n  loading: boolean;\n  thumbUpTooltip: string;\n  thumbDownTooltip: string;\n  handleRatingChange: (rating: Rating) => void;\n};\n\nexport const RatingComponent = ({\n  layout,\n  ratingLabel,\n  loading,\n  thumbUpTooltip,\n  thumbDownTooltip,\n  handleRatingChange,\n}: RatingComponentType) => {\n  return (\n    <RatingContainer layout={layout}>\n      <Label>{ratingLabel}</Label>\n      {loading ? (\n        <Spinner tooltip=\"Laster opp tilbakemelding ...\" />\n      ) : (\n        <FlexContainer flexDirection=\"row\">\n          <Tooltip text={thumbUpTooltip}>\n            <RatingButton\n              htmlProps={{ 'aria-label': thumbUpTooltip }}\n              icon={Thumbup}\n              appearance=\"borderless\"\n              onClick={() => handleRatingChange('positive')}\n              size=\"large\"\n            />\n          </Tooltip>\n          <Tooltip text={thumbDownTooltip}>\n            <div>\n              <RatingButton\n                htmlProps={{ 'aria-label': thumbDownTooltip }}\n                icon={Thumbdown}\n                appearance=\"borderless\"\n                onClick={() => handleRatingChange('negative')}\n                size=\"large\"\n              />\n            </div>\n          </Tooltip>\n        </FlexContainer>\n      )}\n    </RatingContainer>\n  );\n};\n","import styled from 'styled-components';\nimport { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\nimport {\n  ThumbupFilled,\n  ThumbdownFilled,\n  Icon,\n} from '@norges-domstoler/dds-icons';\nimport { Paragraph } from '@norges-domstoler/dds-typography';\n\nimport { FlexContainer } from './FlexContainer';\nimport { Button } from '../Button';\nimport { Rating } from './Feedback.types';\nimport { TextArea } from '../TextArea';\n\nconst IconLabelSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  gap: ${ddsBaseTokens.spacing.SizesDdsSpacingLocalX05};\n`;\n\ntype CommentComponentType = {\n  rating: Rating | null;\n  feedbackText: string | undefined;\n  positiveFeedbackLabel: string;\n  negativeFeedbackLabel: string;\n  ratingSubmittedTitle: string;\n  loading: boolean;\n  handleSubmit: () => void;\n  handleFeedbackTextChange: (newText: string) => void;\n};\n\nexport const CommentComponent = ({\n  rating,\n  feedbackText,\n  positiveFeedbackLabel,\n  negativeFeedbackLabel,\n  ratingSubmittedTitle,\n  loading,\n  handleSubmit,\n  handleFeedbackTextChange,\n}: CommentComponentType) => {\n  return (\n    <FlexContainer flexDirection=\"column\">\n      <IconLabelSpan>\n        <Icon\n          icon={rating === 'positive' ? ThumbupFilled : ThumbdownFilled}\n          color={ddsBaseTokens.colors.DdsColorInteractiveBase}\n        />\n        <Paragraph>{ratingSubmittedTitle} </Paragraph>\n      </IconLabelSpan>\n      <TextArea\n        value={feedbackText}\n        onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) =>\n          handleFeedbackTextChange(e.target.value)\n        }\n        label={\n          rating === 'positive' ? positiveFeedbackLabel : negativeFeedbackLabel\n        }\n        tip=\"Ikke send inn personopplysninger eller annen sensitiv informasjon\"\n      />\n\n      <Button\n        label=\"Send inn\"\n        purpose=\"secondary\"\n        size=\"small\"\n        onClick={handleSubmit}\n        loading={loading}\n      />\n    </FlexContainer>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { FeedbackProps, Rating } from './Feedback.types';\nimport { Paragraph } from '@norges-domstoler/dds-typography';\nimport { RatingComponent } from './RatingComponent';\nimport { CommentComponent } from './CommentComponent';\n\nexport const Feedback = ({\n  layout = 'vertical',\n  ratingLabel = 'Hva syns du om tjenesten?',\n  positiveFeedbackLabel = 'Hva kan vi forbedre? (valgfritt)',\n  negativeFeedbackLabel = 'Hva kan vi forbedre? (valgfritt)',\n  ratingSubmittedTitle = 'Tusen takk! Tilbakemeldingen din hjelper oss å forbedre løsningen',\n  submittedTitle = 'Tusen takk! Tilbakemeldingen din hjelper oss å forbedre løsningen',\n  ratingValue: ratingProp,\n  feedbackTextValue: feedbackTextProp,\n  thumbUpTooltip = 'Bra',\n  thumbDownTooltip = 'Dårlig',\n  feedbackTextAreaExcluded = false,\n  loading = false,\n  isSubmitted: isSubmittedProp,\n  onRating,\n  onFeedbackTextChange,\n  onSubmit,\n}: FeedbackProps) => {\n  const [rating, setRating] = useState<Rating | null>(null);\n  const [feedbackText, setFeedbackText] = useState<string>();\n  const [isFeedbackSubmitted, setIsFeedbackSubmitted] =\n    useState<boolean>(false);\n\n  useEffect(() => {\n    ratingProp !== undefined && setRating(ratingProp);\n  }, [ratingProp]);\n\n  useEffect(() => {\n    feedbackTextProp !== undefined && setFeedbackText(feedbackTextProp);\n  }, [feedbackTextProp]);\n\n  useEffect(() => {\n    isSubmittedProp !== undefined && setIsFeedbackSubmitted(isSubmittedProp);\n  }, [isSubmittedProp]);\n\n  const handleRatingChange = (newRating: Rating) => {\n    onRating && onRating(newRating);\n    onSubmit && feedbackTextAreaExcluded && onSubmit(newRating, '');\n\n    ratingProp === undefined && setRating(newRating);\n  };\n\n  const handleFeedbackTextChange = (newFeedbackText: string) => {\n    onFeedbackTextChange && onFeedbackTextChange(newFeedbackText);\n    feedbackTextProp === undefined && setFeedbackText(newFeedbackText);\n  };\n\n  const handleSubmit = () => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- Ved submit er rating alltid satt\n    onSubmit && onSubmit(rating!, feedbackText ?? '');\n    isSubmittedProp === undefined && setIsFeedbackSubmitted(true);\n  };\n\n  if (rating === null && !isFeedbackSubmitted) {\n    return (\n      <RatingComponent\n        layout={layout}\n        ratingLabel={ratingLabel}\n        loading={loading}\n        thumbUpTooltip={thumbUpTooltip}\n        thumbDownTooltip={thumbDownTooltip}\n        handleRatingChange={handleRatingChange}\n      />\n    );\n  }\n\n  if (!feedbackTextAreaExcluded && !isFeedbackSubmitted) {\n    return (\n      <CommentComponent\n        rating={rating}\n        feedbackText={feedbackText}\n        positiveFeedbackLabel={positiveFeedbackLabel}\n        negativeFeedbackLabel={negativeFeedbackLabel}\n        ratingSubmittedTitle={ratingSubmittedTitle}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        handleFeedbackTextChange={handleFeedbackTextChange}\n      />\n    );\n  }\n\n  return <Paragraph>{submittedTitle}</Paragraph>;\n};\n"],"names":["FlexContainer","styled","flexDirection","css","ddsBaseTokens","RatingContainer","layout","RatingButton","Button","RatingComponent","ratingLabel","loading","thumbUpTooltip","thumbDownTooltip","handleRatingChange","jsxs","jsx","Label","Spinner","Tooltip","Thumbup","Thumbdown","IconLabelSpan","CommentComponent","rating","feedbackText","positiveFeedbackLabel","negativeFeedbackLabel","ratingSubmittedTitle","handleSubmit","handleFeedbackTextChange","Icon","ThumbupFilled","ThumbdownFilled","Paragraph","TextArea","e","Feedback","submittedTitle","ratingProp","feedbackTextProp","feedbackTextAreaExcluded","isSubmittedProp","onRating","onFeedbackTextChange","onSubmit","setRating","useState","setFeedbackText","isFeedbackSubmitted","setIsFeedbackSubmitted","useEffect","newRating","newFeedbackText"],"mappings":"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"}