{"version":3,"file":"Datepicker.stories-b974255c.js","sources":["../../../../packages/components/src/components/Datepicker/calendar_today.svg","../../../../packages/components/src/components/Datepicker/Datepicker.tokens.tsx","../../../../packages/components/src/components/Datepicker/Datepicker.tsx"],"sourcesContent":["export default \"__VITE_ASSET__387df22d__\"","import { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\n\nconst { iconSizes, spacing, border } = ddsBaseTokens;\n\nconst calendarIndicator = {\n  base: {\n    sizes: {\n      medium: {\n        height: iconSizes.DdsIconsizeMedium,\n        width: iconSizes.DdsIconsizeMedium,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n      small: {\n        height: iconSizes.DdsIconsizeSmall,\n        width: iconSizes.DdsIconsizeSmall,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n      tiny: {\n        height: iconSizes.DdsIconsizeSmall,\n        width: iconSizes.DdsIconsizeSmall,\n        right: spacing.SizesDdsSpacingLocalX075,\n      },\n    },\n  },\n  focus: {\n    outline: `${border.BordersDdsBorderFocusInputfieldStroke} solid ${border.BordersDdsBorderFocusInputfieldStrokeWeight}`,\n    outlineOffset: spacing.SizesDdsSpacingLocalX0125,\n  },\n};\n\nexport const datepickerTokens = {\n  calendarIndicator,\n};\n","import { forwardRef, useId } from 'react';\nimport {\n  derivativeIdGenerator,\n  spaceSeparatedIdListGenerator,\n  selection,\n} from '@norges-domstoler/dds-core';\nimport { Label } from '@norges-domstoler/dds-typography';\nimport { Property } from 'csstype';\nimport styled, { css } from 'styled-components';\nimport CalendarIcon from './calendar_today.svg';\nimport {\n  StatefulInput,\n  OuterInputContainer,\n  InputSize,\n  InputProps,\n} from '@norges-domstoler/dds-form';\n\nimport { datepickerTokens as tokens } from './Datepicker.tokens';\nimport { renderInputMessage } from '../../utils/renderInputMessage';\n\nconst StyledInput = styled(StatefulInput)`\n  &::-webkit-calendar-picker-indicator {\n    // Ensure double quotes in url due to svg data URI in image bundle that requires them, as the attributes use single quotes\n    background-image: ${`url(\"${CalendarIcon}\")`};\n    position: absolute;\n    ${({ componentSize }) =>\n      componentSize &&\n      css`\n        right: ${tokens.calendarIndicator.base.sizes[componentSize].right};\n        height: ${tokens.calendarIndicator.base.sizes[componentSize].height};\n        width: ${tokens.calendarIndicator.base.sizes[componentSize].width};\n      `}\n    margin-left: 0px;\n    padding: 0;\n    top: 50%;\n    transform: translate(0, -50%);\n    box-sizing: border-box;\n  }\n\n  &::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n\n  &::-webkit-calendar-picker-indicator:focus-visible {\n    outline: ${tokens.calendarIndicator.focus.outline};\n    outline-offset: ${tokens.calendarIndicator.focus.outlineOffset};\n  }\n\n  &::-webkit-inner-spin-button {\n    display: none;\n  }\n\n  @media (prefers-reduced-motion: no-preference) {\n    ::-webkit-datetime-edit-day-field,\n    ::-webkit-datetime-edit-month-field,\n    ::-webkit-datetime-edit-year-field,\n    ::-webkit-datetime-edit-hour-field,\n    ::-webkit-datetime-edit-minute-field {\n      transition: 0.2s;\n    }\n  }\n\n  &::-webkit-datetime-edit-day-field:focus,\n  &::-webkit-datetime-edit-month-field:focus,\n  &::-webkit-datetime-edit-year-field:focus,\n  &::-webkit-datetime-edit-hour-field:focus,\n  &::-webkit-datetime-edit-minute-field:focus {\n    ${selection}\n  }\n`;\n\ntype DatepickerType = 'date' | 'datetime-local';\n\nexport type DatepickerProps = Omit<InputProps, 'type'> & {\n  /** Angi dato-input med eller uten klokkeslett. */\n  type?: DatepickerType;\n};\n\nexport const Datepicker = forwardRef<HTMLInputElement, DatepickerProps>(\n  (\n    {\n      id,\n      type = 'date',\n      required,\n      readOnly,\n      disabled,\n      label,\n      width,\n      errorMessage,\n      tip,\n      style,\n      className,\n      componentSize = 'medium',\n      max,\n      'aria-required': ariaRequired,\n      'aria-describedby': ariaDescribedby,\n      ...rest\n    },\n    ref\n  ) => {\n    const generatedId = useId();\n    const uniqueId = id ?? `${generatedId}-datepickerInput`;\n\n    const componentWidth = width ? width : getWidth(type, componentSize);\n    const hasLabel = !!label;\n    const hasErrorMessage = !!errorMessage;\n    const showRequiredStyling = !!(required || ariaRequired);\n\n    const errorMessageId = derivativeIdGenerator(uniqueId, 'errorMessage');\n    const tipId = derivativeIdGenerator(uniqueId, 'tip');\n\n    const inputProps = {\n      id: uniqueId,\n      hasErrorMessage,\n      ref,\n      readOnly,\n      tabIndex: readOnly ? -1 : 0,\n      required,\n      disabled,\n      componentSize,\n      type,\n      'aria-describedby': spaceSeparatedIdListGenerator([\n        tip ? tipId : undefined,\n        errorMessage ? errorMessageId : undefined,\n        ariaDescribedby,\n      ]),\n      'aria-required': ariaRequired,\n      'aria-invalid': hasErrorMessage ? true : undefined,\n      max: getMax(type, max),\n      ...rest,\n    };\n\n    const outerinputContainerProps = {\n      width: componentWidth,\n      style,\n      className,\n    };\n\n    return (\n      <OuterInputContainer {...outerinputContainerProps}>\n        {hasLabel && (\n          <Label htmlFor={uniqueId} showRequiredStyling={showRequiredStyling}>\n            {label}\n          </Label>\n        )}\n        <StyledInput {...inputProps} />\n        {renderInputMessage(tip, tipId, errorMessage, errorMessageId)}\n      </OuterInputContainer>\n    );\n  }\n);\nDatepicker.displayName = 'Datepicker';\n\nconst defaultWidths: {\n  [k in DatepickerType]: { [k in InputSize]: Property.Width<string> };\n} = {\n  date: {\n    medium: '160px',\n    small: '140px',\n    tiny: '125px',\n  },\n  ['datetime-local']: {\n    medium: '200px',\n    small: '180px',\n    tiny: '150px',\n  },\n};\n\nconst getWidth = (\n  type: DatepickerType,\n  size: InputSize\n): Property.Width<string> => defaultWidths[type][size];\n\nconst getMax = (\n  type: DatepickerType,\n  max?: string | number\n): string | number | undefined => {\n  if (max !== undefined) {\n    return max;\n  }\n\n  // Limit the year-part to only four digits by default\n\n  if (type === 'datetime-local') {\n    return '9999-12-31T23:59';\n  }\n\n  if (type === 'date') {\n    return '9999-12-31';\n  }\n};\n"],"names":["CalendarIcon","iconSizes","spacing","border","ddsBaseTokens","calendarIndicator","datepickerTokens","StyledInput","styled","StatefulInput","componentSize","css","tokens","selection","Datepicker","forwardRef","id","type","required","readOnly","disabled","label","width","errorMessage","tip","style","className","max","ariaRequired","ariaDescribedby","rest","ref","generatedId","useId","uniqueId","componentWidth","getWidth","hasLabel","hasErrorMessage","showRequiredStyling","errorMessageId","derivativeIdGenerator","tipId","inputProps","spaceSeparatedIdListGenerator","getMax","jsxs","OuterInputContainer","jsx","Label","renderInputMessage","defaultWidths","size"],"mappings":"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"}