{"version":3,"file":"ScrollableContainer-fdff97a3.js","sources":["../../../../packages/components/dist/components/ScrollableContainer/Scrollbar.js","../../../../packages/components/dist/components/ScrollableContainer/ScrollableContainer.js"],"sourcesContent":["import { slicedToArray as _slicedToArray } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport { __rest } from 'tslib';\nimport { jsx, jsxs } from 'react/jsx-runtime';\nimport { useRef, useState, useCallback, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { getBaseHTMLProps } from '@norges-domstoler/dds-core';\nimport { scrollbarTokens } from './ScrollableContainer.tokens.js';\n\nvar track = scrollbarTokens.track,\n  thumb = scrollbarTokens.thumb,\n  minThumbHeightPx = scrollbarTokens.minThumbHeightPx;\nvar ScrollbarOuterWrapper = styled.div.withConfig({\n  displayName: \"Scrollbar__ScrollbarOuterWrapper\",\n  componentId: \"sc-mphi5n-0\"\n})([\"\"]);\nvar ScrollbarElements = styled.div.withConfig({\n  displayName: \"Scrollbar__ScrollbarElements\",\n  componentId: \"sc-mphi5n-1\"\n})([\"display:block;height:100%;position:relative;display:grid;justify-items:center;\"]);\nvar Track = styled.div.withConfig({\n  displayName: \"Scrollbar__Track\",\n  componentId: \"sc-mphi5n-2\"\n})([\"bottom:0;top:0;position:absolute;background-color:\", \";border-radius:\", \";width:\", \";\"], track.backgroundColor, track.borderRadius, track.width);\nvar Thumb = styled.div.withConfig({\n  displayName: \"Scrollbar__Thumb\",\n  componentId: \"sc-mphi5n-3\"\n})([\"position:absolute;background-color:\", \";border-radius:\", \";width:\", \";transition:background-color 0.2s;&:hover{background-color:\", \";}\"], thumb.base.backgroundColor, thumb.base.borderRadius, thumb.base.width, thumb.hover.backgroundColor);\nvar Scrollbar = function Scrollbar(props) {\n  var id = props.id,\n    className = props.className,\n    htmlProps = props.htmlProps,\n    contentRef = props.contentRef,\n    rest = __rest(props, [\"id\", \"className\", \"htmlProps\", \"contentRef\"]);\n  var trackRef = useRef(null);\n  var thumbRef = useRef(null);\n  var _useState = useState(minThumbHeightPx),\n    _useState2 = _slicedToArray(_useState, 2),\n    thumbHeight = _useState2[0],\n    setThumbHeight = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isScrollable = _useState4[0],\n    setIsScrollable = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    thumbTop = _useState6[0],\n    setThumbTop = _useState6[1];\n  var observer = useRef(null);\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    scrollStartPosition = _useState8[0],\n    setScrollStartPosition = _useState8[1];\n  var _useState9 = useState(0),\n    _useState10 = _slicedToArray(_useState9, 2),\n    initialScrollTop = _useState10[0],\n    setInitialScrollTop = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isDragging = _useState12[0],\n    setIsDragging = _useState12[1];\n  function handleResize(ref, trackSize) {\n    var clientHeight = ref.clientHeight,\n      scrollHeight = ref.scrollHeight;\n    setIsScrollable(clientHeight !== scrollHeight);\n    setThumbHeight(Math.max(clientHeight / scrollHeight * trackSize, minThumbHeightPx));\n  }\n  var handleTrackClick = useCallback(function (e) {\n    if (contentRef && contentRef.current) {\n      var trackCurrent = trackRef.current;\n      var contentCurrent = contentRef.current;\n      if (trackCurrent && contentCurrent) {\n        var clientY = e.clientY;\n        var target = e.target;\n        var rect = target.getBoundingClientRect();\n        var trackTop = rect.top;\n        var thumbOffset = -(thumbHeight / 2);\n        var clickRatio = (clientY - trackTop + thumbOffset) / trackCurrent.clientHeight;\n        var scrollAmount = Math.floor(clickRatio * contentCurrent.scrollHeight);\n        contentCurrent.scrollTo({\n          top: scrollAmount,\n          behavior: 'smooth'\n        });\n      }\n    }\n  }, [thumbHeight]);\n  var handleThumbPositioning = useCallback(function () {\n    if (!(contentRef === null || contentRef === void 0 ? void 0 : contentRef.current) || !trackRef.current || !thumbRef.current) {\n      return;\n    }\n    var _contentRef$current = contentRef.current,\n      contentTop = _contentRef$current.scrollTop,\n      contentHeight = _contentRef$current.scrollHeight;\n    var clientHeight = trackRef.current.clientHeight;\n    var newTop = +contentTop / +contentHeight * clientHeight;\n    newTop = Math.min(newTop, clientHeight - thumbHeight);\n    setThumbTop(newTop);\n  }, []);\n  useEffect(function () {\n    if (contentRef && contentRef.current && trackRef.current) {\n      var ref = contentRef.current;\n      var clientHeight = trackRef.current.clientHeight;\n      observer.current = new ResizeObserver(function () {\n        handleResize(ref, clientHeight);\n      });\n      observer.current.observe(ref);\n      ref.addEventListener('scroll', handleThumbPositioning);\n      return function () {\n        var _a;\n        (_a = observer.current) === null || _a === void 0 ? void 0 : _a.unobserve(ref);\n        ref.removeEventListener('scroll', handleThumbPositioning);\n      };\n    }\n  }, []);\n  var handleThumbMousedown = useCallback(function (e) {\n    setScrollStartPosition(e.clientY);\n    if (contentRef && contentRef.current) setInitialScrollTop(contentRef.current.scrollTop);\n    setIsDragging(true);\n  }, []);\n  var handleThumbMouseup = useCallback(function () {\n    if (isDragging) {\n      setIsDragging(false);\n    }\n  }, [isDragging]);\n  var handleThumbMousemove = useCallback(function (e) {\n    if (contentRef && contentRef.current) {\n      if (isDragging) {\n        var _contentRef$current2 = contentRef.current,\n          contentScrollHeight = _contentRef$current2.scrollHeight,\n          contentOffsetHeight = _contentRef$current2.offsetHeight;\n        var deltaY = (e.clientY - scrollStartPosition) * (contentOffsetHeight / thumbHeight);\n        var newScrollTop = Math.min(initialScrollTop + deltaY, contentScrollHeight - contentOffsetHeight);\n        contentRef.current.scrollTop = newScrollTop;\n      }\n    }\n  }, [isDragging, scrollStartPosition, thumbHeight]);\n  useEffect(function () {\n    document.addEventListener('mousemove', handleThumbMousemove);\n    document.addEventListener('mouseup', handleThumbMouseup);\n    document.addEventListener('mouseleave', handleThumbMouseup);\n    return function () {\n      document.removeEventListener('mousemove', handleThumbMousemove);\n      document.removeEventListener('mouseup', handleThumbMouseup);\n      document.removeEventListener('mouseleave', handleThumbMouseup);\n    };\n  }, [handleThumbMousemove, handleThumbMouseup]);\n  return isScrollable ? jsx(ScrollbarOuterWrapper, Object.assign({}, getBaseHTMLProps(id, className, htmlProps, rest), {\n    children: jsxs(ScrollbarElements, {\n      children: [jsx(Track, {\n        ref: trackRef,\n        onClick: handleTrackClick\n      }), jsx(Thumb, {\n        style: {\n          height: thumbHeight,\n          top: thumbTop\n        },\n        ref: thumbRef,\n        onMouseDown: handleThumbMousedown\n      })]\n    })\n  })) : null;\n};\nScrollbar.displayName = 'Scrollbar';\n\nexport { Scrollbar };\n","import { __rest } from 'tslib';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useRef } from 'react';\nimport styled from 'styled-components';\nimport { getBaseHTMLProps } from '@norges-domstoler/dds-core';\nimport { Scrollbar } from './Scrollbar.js';\nimport { scrollbarTokens } from './ScrollableContainer.tokens.js';\nimport { focusVisibleTransitionValue, focusVisible } from '@norges-domstoler/dds-form';\n\nvar track = scrollbarTokens.track,\n  content = scrollbarTokens.content,\n  outerContainer = scrollbarTokens.outerContainer;\nvar StyledScrollableContainer = styled.div.withConfig({\n  displayName: \"ScrollableContainer__StyledScrollableContainer\",\n  componentId: \"sc-t0dczu-0\"\n})([\"grid-template:auto / 1fr \", \";overflow:hidden;position:relative;display:grid;padding:\", \";\"], track.width, outerContainer.padding);\nvar Content = styled.div.withConfig({\n  displayName: \"ScrollableContainer__Content\",\n  componentId: \"sc-t0dczu-1\"\n})([\"height:\", \";overflow:auto;scrollbar-width:none;::-webkit-scrollbar{display:none;}padding-right:\", \";@media (prefers-reduced-motion:no-preference){transition:\", \";}:focus-visible,.focus-visible{outline:\", \";outline-offset:\", \";}\"], function (_ref) {\n  var height = _ref.height;\n  return height;\n}, content.paddingRight, focusVisibleTransitionValue, focusVisible.outline, focusVisible.outlineOffset);\nvar ScrollableContainer = function ScrollableContainer(props) {\n  var children = props.children,\n    id = props.id,\n    className = props.className,\n    _props$contentHeight = props.contentHeight,\n    contentHeight = _props$contentHeight === void 0 ? '90vh' : _props$contentHeight,\n    htmlProps = props.htmlProps,\n    rest = __rest(props, [\"children\", \"id\", \"className\", \"contentHeight\", \"htmlProps\"]);\n  var ref = useRef(null);\n  return jsxs(StyledScrollableContainer, Object.assign({}, getBaseHTMLProps(id, className, htmlProps, rest), {\n    children: [jsx(Content, {\n      height: contentHeight,\n      ref: ref,\n      tabIndex: 0,\n      children: children\n    }), jsx(Scrollbar, {\n      contentRef: ref\n    })]\n  }));\n};\nScrollableContainer.displayName = 'ScrollableContainer';\n\nexport { ScrollableContainer };\n"],"names":["track","scrollbarTokens","thumb","minThumbHeightPx","ScrollbarOuterWrapper","styled","ScrollbarElements","Track","Thumb","Scrollbar","props","id","className","htmlProps","contentRef","rest","__rest","trackRef","useRef","thumbRef","_useState","useState","_useState2","_slicedToArray","thumbHeight","setThumbHeight","_useState3","_useState4","isScrollable","setIsScrollable","_useState5","_useState6","thumbTop","setThumbTop","observer","_useState7","_useState8","scrollStartPosition","setScrollStartPosition","_useState9","_useState10","initialScrollTop","setInitialScrollTop","_useState11","_useState12","isDragging","setIsDragging","handleResize","ref","trackSize","clientHeight","scrollHeight","handleTrackClick","useCallback","e","trackCurrent","contentCurrent","clientY","target","rect","trackTop","thumbOffset","clickRatio","scrollAmount","handleThumbPositioning","_contentRef$current","contentTop","contentHeight","newTop","useEffect","_a","handleThumbMousedown","handleThumbMouseup","handleThumbMousemove","_contentRef$current2","contentScrollHeight","contentOffsetHeight","deltaY","newScrollTop","jsx","getBaseHTMLProps","jsxs","content","outerContainer","StyledScrollableContainer","Content","_ref","height","focusVisibleTransitionValue","focusVisible","ScrollableContainer","children","_props$contentHeight"],"mappings":"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"}