{"version":3,"file":"LocalMessage-03c4d58c.js","sources":["../../../../packages/components/src/components/LocalMessage/LocalMessage.tsx"],"sourcesContent":["import styled, { css } from 'styled-components';\nimport { Button } from '../Button';\nimport { forwardRef, useState } from 'react';\nimport { localMessageTokens as tokens } from './LocalMessage.tokens';\nimport { Icon } from '../Icon';\nimport { Property } from 'csstype';\nimport { Typography } from '../Typography';\nimport { BaseComponentPropsWithChildren, getBaseHTMLProps } from '../../types';\nimport { CloseIcon } from '../../icons/tsx';\nimport { selection } from '../../helpers/styling';\nimport {\n  defaultTypographyType,\n  getFontStyling,\n} from '../Typography/Typography.utils';\n\nconst defaultWidth: Property.Width<string> = '400px';\nconst { container, icon, purposeVariants } = tokens;\n\ntype ContainerProps = Pick<\n  LocalMessageProps,\n  'purpose' | 'width' | 'layout' | 'closable'\n>;\n\nconst Container = styled.div<ContainerProps>`\n  box-sizing: border-box;\n  display: grid;\n  grid-template-areas: ${({ layout, closable }) =>\n    getGridTemplateAreas(layout, closable)};\n  grid-template-columns: ${({ layout, closable }) =>\n    getGridTemplateColumns(layout, closable)};\n  box-shadow: ${container.base.boxShadow};\n  border: ${container.base.border};\n  border-radius: ${container.base.borderRadius};\n  padding: ${container.base.padding};\n  gap: ${container.base.gap};\n  align-items: center;\n  ${getFontStyling(defaultTypographyType, true)}\n\n  *::selection {\n    ${selection}\n  }\n  ${({ purpose }) =>\n    purpose &&\n    css`\n      border-color: ${container.purpose[purpose].borderColor};\n      background-color: ${container.purpose[purpose].backgroundColor};\n    `}\n  width: ${({ width }) => width};\n`;\n\nfunction getGridTemplateAreas(\n  layout: LocalMessageProps['layout'],\n  closeable: LocalMessageProps['closable']\n) {\n  if (closeable) {\n    if (layout === 'horisontal') {\n      return '\"icon text closeButton\"';\n    }\n    return '\"icon closeButton\" \"text text\"';\n  } else {\n    if (layout === 'horisontal') {\n      return '\"icon text\"';\n    }\n    return '\"icon icon\" \"text text\"';\n  }\n}\n\nfunction getGridTemplateColumns(\n  layout: LocalMessageProps['layout'],\n  closable: LocalMessageProps['closable']\n) {\n  if (closable) {\n    return layout === 'horisontal'\n      ? 'min-content 1fr min-content'\n      : '1fr min-content';\n  }\n  return layout === 'horisontal' ? 'min-content 1fr' : '1fr';\n}\n\nconst MessageIconWrapper = styled(Icon)`\n  grid-area: icon;\n`;\n\nconst TextContainer = styled.div`\n  grid-area: text;\n`;\n\nconst CloseButton = styled(Button)<Pick<LocalMessageProps, 'layout'>>`\n  grid-area: closeButton;\n  margin: -${container.base.padding} 0;\n`;\n\nexport type LocalMessagePurpose =\n  | 'info'\n  | 'warning'\n  | 'danger'\n  | 'confidential'\n  | 'success'\n  | 'tips';\n\nexport type LocalMessageLayout = 'horisontal' | 'vertical';\n\nexport type LocalMessageProps = BaseComponentPropsWithChildren<\n  HTMLDivElement,\n  {\n    /**Meldingen som vises til brukeren. Brukes kun når meldingen er string. */\n    message?: string;\n    /**Formålet med meldingen. Påvirker styling. */\n    purpose?: LocalMessagePurpose;\n    /** Indikerer om meldingen skal være lukkbar.*/\n    closable?: boolean;\n    /**Ekstra logikk å kjøre når meldingen lukkes. */\n    onClose?: () => void;\n    /**Layoutet i komponenten. Ved kompleks innhold anbefales `layout='vertical'`. */\n    layout?: LocalMessageLayout;\n    /**Custom bredde ved behov. */\n    width?: Property.Width<string>;\n  }\n>;\n\nexport const LocalMessage = forwardRef<HTMLDivElement, LocalMessageProps>(\n  (props, ref) => {\n    const {\n      message,\n      purpose = 'info',\n      closable,\n      onClose,\n      width = defaultWidth,\n      layout = 'horisontal',\n      children,\n      id,\n      className,\n      htmlProps,\n      ...rest\n    } = props;\n\n    const [isClosed, setClosed] = useState(false);\n\n    const containerProps = {\n      ...getBaseHTMLProps(id, className, htmlProps, rest),\n      purpose,\n      width,\n      layout,\n      closable,\n      ref,\n    };\n\n    if (isClosed) {\n      return <></>;\n    }\n\n    return (\n      <Container {...containerProps}>\n        <MessageIconWrapper\n          icon={purposeVariants[purpose].icon}\n          color={icon[purpose].color}\n        />\n        <TextContainer>\n          {children ?? <Typography as=\"span\">{message}</Typography>}\n        </TextContainer>\n        {closable && (\n          <CloseButton\n            icon={CloseIcon}\n            purpose={purposeVariants[purpose].closeButtonPurpose}\n            appearance=\"borderless\"\n            onClick={() => {\n              setClosed(true);\n              onClose && onClose();\n            }}\n            size=\"small\"\n            aria-label=\"Lukk melding\"\n          />\n        )}\n      </Container>\n    );\n  }\n);\n\nLocalMessage.displayName = 'LocalMessage';\n"],"names":["defaultWidth","container","icon","purposeVariants","tokens","Container","styled","layout","closable","getGridTemplateAreas","getGridTemplateColumns","getFontStyling","defaultTypographyType","selection","purpose","css","width","closeable","MessageIconWrapper","Icon","TextContainer","CloseButton","Button","LocalMessage","forwardRef","props","ref","message","onClose","children","id","className","htmlProps","rest","isClosed","setClosed","useState","containerProps","getBaseHTMLProps","jsx","Fragment","jsxs","Typography","CloseIcon"],"mappings":"0eAeA,MAAMA,EAAuC,QACvC,CAAE,UAAAC,EAAW,KAAAC,EAAM,gBAAAC,CAAA,EAAoBC,EAOvCC,EAAYC,EAAO;AAAA;AAAA;AAAA,yBAGA,CAAC,CAAE,OAAAC,EAAQ,SAAAC,KAChCC,EAAqBF,EAAQC,CAAQ;AAAA,2BACd,CAAC,CAAE,OAAAD,EAAQ,SAAAC,KAClCE,EAAuBH,EAAQC,CAAQ;AAAA,gBAC3BP,EAAU,KAAK;AAAA,YACnBA,EAAU,KAAK;AAAA,mBACRA,EAAU,KAAK;AAAA,aACrBA,EAAU,KAAK;AAAA,SACnBA,EAAU,KAAK;AAAA;AAAA,IAEpBU,EAAeC,EAAuB,EAAI;AAAA;AAAA;AAAA,MAGxCC;AAAA;AAAA,IAEF,CAAC,CAAE,QAAAC,KACHA,GACAC;AAAAA,sBACkBd,EAAU,QAAQa,CAAO,EAAE;AAAA,0BACvBb,EAAU,QAAQa,CAAO,EAAE;AAAA;AAAA,WAE1C,CAAC,CAAE,MAAAE,CAAY,IAAAA;AAAA,EAG1B,SAASP,EACPF,EACAU,EACA,CACA,OAAIA,EACEV,IAAW,aACN,0BAEF,iCAEHA,IAAW,aACN,cAEF,yBAEX,CAEA,SAASG,EACPH,EACAC,EACA,CACA,OAAIA,EACKD,IAAW,aACd,8BACA,kBAECA,IAAW,aAAe,kBAAoB,KACvD,CAEA,MAAMW,EAAqBZ,EAAOa,CAAI;AAAA;AAAA,EAIhCC,EAAgBd,EAAO;AAAA;AAAA,EAIvBe,EAAcf,EAAOgB,CAAM;AAAA;AAAA,aAEpBrB,EAAU,KAAK;AAAA,EA+BfsB,EAAeC,EAAA,WAC1B,CAACC,EAAOC,IAAQ,CACR,KAAA,CACJ,QAAAC,EACA,QAAAb,EAAU,OACV,SAAAN,EACA,QAAAoB,EACA,MAAAZ,EAAQhB,EACR,OAAAO,EAAS,aACT,SAAAsB,EACA,GAAAC,EACA,UAAAC,EACA,UAAAC,EACA,GAAGC,CACD,EAAAR,EAEE,CAACS,EAAUC,CAAS,EAAIC,WAAS,EAAK,EAEtCC,EAAiB,CACrB,GAAGC,EAAiBR,EAAIC,EAAWC,EAAWC,CAAI,EAClD,QAAAnB,EACA,MAAAE,EACA,OAAAT,EACA,SAAAC,EACA,IAAAkB,CAAA,EAGF,OAAIQ,EACOK,EAAAC,EAAA,CAAA,CAAA,EAITC,EAACpC,EAAW,CAAA,GAAGgC,EACb,SAAA,CAAAE,EAACrB,EAAA,CACC,KAAMf,EAAgBW,CAAO,EAAE,KAC/B,MAAOZ,EAAKY,CAAO,EAAE,KAAA,CACvB,EACAyB,EAACnB,GACE,SAAYS,GAAAU,EAACG,GAAW,GAAG,OAAQ,WAAQ,CAC9C,CAAA,EACClC,GACC+B,EAAClB,EAAA,CACC,KAAMsB,EACN,QAASxC,EAAgBW,CAAO,EAAE,mBAClC,WAAW,aACX,QAAS,IAAM,CACbqB,EAAU,EAAI,EACdP,GAAWA,EAAQ,CACrB,EACA,KAAK,QACL,aAAW,cAAA,CACb,CAEJ,CAAA,CAAA,CAEJ,CACF,EAEAL,EAAa,YAAc"}