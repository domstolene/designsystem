{"version":3,"file":"Spinner-3b81cc2b.js","sources":["../../../../packages/components/src/components/Spinner/Spinner.tsx"],"sourcesContent":["import React, { useId } from 'react';\nimport styled from 'styled-components';\nimport { Property } from 'csstype';\nimport { getTextColor, TextColor } from '@norges-domstoler/dds-core';\nimport { ddsBaseTokens } from '@norges-domstoler/dds-design-tokens';\nimport {\n  BaseComponentProps,\n  getBaseHTMLProps,\n} from '@norges-domstoler/dds-core';\n\ntype StyledSpinnerProps = Pick<SpinnerProps, 'size'> & {\n  outerAnimationDelay: number;\n};\n\nconst StyledSpinner = styled.svg<StyledSpinnerProps>`\n  display: block;\n  width: ${({ size }) => size};\n  height: ${({ size }) => size};\n  stroke-dasharray: 90, 150;\n  animation: rotate 1.5s linear infinite;\n  animation-delay: ${({ outerAnimationDelay }) => outerAnimationDelay}ms;\n\n  @media (prefers-reduced-motion: no-preference) {\n    animation: rotate 2s linear infinite;\n  }\n\n  @keyframes rotate {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`;\n\ntype CircleProps = Pick<SpinnerProps, 'color'> & {\n  innerAnimationDelay: number;\n};\n\nconst Circle = styled.circle<CircleProps>`\n  stroke: ${({ color }) => color && getTextColor(color)};\n  stroke-linecap: round;\n\n  @media (prefers-reduced-motion: no-preference) {\n    animation: dash 1.5s ease-in-out infinite;\n    animation-delay: ${({ innerAnimationDelay }) => innerAnimationDelay}ms;\n\n    @keyframes dash {\n      0% {\n        stroke-dasharray: 1, 150;\n        stroke-dashoffset: 0;\n      }\n      50% {\n        stroke-dasharray: 90, 150;\n        stroke-dashoffset: -35;\n      }\n      100% {\n        stroke-dasharray: 90, 150;\n        stroke-dashoffset: -124;\n      }\n    }\n  }\n`;\n\nexport type SpinnerProps = BaseComponentProps<\n  SVGElement,\n  {\n    /**Farge på spinneren. */\n    color?: TextColor | (string & NonNullable<unknown>);\n    /**Størrelse; Setter høyde og bredde på spinneren. */\n    size?: Property.Width<string>;\n    /**Tekst som vises ved hover. */\n    tooltip?: string;\n  }\n>;\n\nexport function Spinner(props: SpinnerProps) {\n  const {\n    size = ddsBaseTokens.iconSizes.DdsIconsizeMedium,\n    color = 'interactive',\n    tooltip = 'Innlasting pågår',\n    id,\n    className,\n    htmlProps,\n    ...rest\n  } = props;\n\n  const mountTime = React.useRef(Date.now());\n  const outerAnimationDelay = -(mountTime.current % 2000);\n  const innerAnimationDelay = -(mountTime.current % 1500);\n\n  const generatedId = useId();\n  const uniqueId = `${generatedId}-spinnerTitle`;\n\n  const spinnerProps = {\n    ...getBaseHTMLProps(id, className, htmlProps, rest),\n    outerAnimationDelay,\n    size,\n  };\n\n  const circleProps = {\n    innerAnimationDelay,\n    color,\n  };\n\n  return (\n    <StyledSpinner\n      viewBox=\"0 0 50 50\"\n      role=\"img\"\n      aria-labelledby={uniqueId}\n      {...spinnerProps}\n    >\n      {tooltip && <title id={uniqueId}>{tooltip}</title>}\n      <Circle\n        {...circleProps}\n        cx=\"25\"\n        cy=\"25\"\n        r=\"20\"\n        fill=\"none\"\n        strokeWidth=\"4\"\n      />\n    </StyledSpinner>\n  );\n}\n\nSpinner.displayName = 'Spinner';\n"],"names":["StyledSpinner","styled","size","outerAnimationDelay","Circle","color","getTextColor","innerAnimationDelay","Spinner","props","ddsBaseTokens","tooltip","id","className","htmlProps","rest","mountTime","React","uniqueId","useId","spinnerProps","getBaseHTMLProps","jsxs","jsx"],"mappings":"4NAcA,MAAAA,EAAAC,EAAA;AAAA;AAAA,WAA6B,CAAA,CAAA,KAAAC,CAAA,IAAAA,CAAA;AAAA,YAEA,CAAA,CAAA,KAAAA,CAAA,IAAAA,CAAA;AAAA;AAAA;AAAA,qBACC,CAAA,CAAA,oBAAAC,CAAA,IAAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoB9BC,EAAAH,EAAA;AAAA,YAAsB,CAAA,CAAA,MAAAI,CAAA,IAAAA,GAAAC,EAAAD,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACiC,CAAA,CAAA,oBAAAE,CAAA,IAAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoChD,SAAAC,EAAAC,EAAA,CACL,KAAA,CAAM,KAAAP,EAAAQ,EAAA,UAAA,kBAC2B,MAAAL,EAAA,cACvB,QAAAM,EAAA,mBACE,GAAAC,EACV,UAAAC,EACA,UAAAC,EACA,GAAAC,CACG,EAAAN,EAGLO,EAAAC,EAAA,OAAA,KAAA,IAAA,CAAA,EACAd,EAAA,EAAAa,EAAA,QAAA,KACAT,EAAA,EAAAS,EAAA,QAAA,MAGAE,EAAA,GADAC,EAAAA,OACA,gBAEAC,EAAA,CAAqB,GAAAC,EAAAT,EAAAC,EAAAC,EAAAC,CAAA,EAC+B,oBAAAZ,EAClD,KAAAD,CACA,EAQF,OAAAoB,EACEtB,EAAC,CAAA,QAAA,YACS,KAAA,MACH,kBAAAkB,EACY,GAAAE,EACb,SAAA,CAEHT,GAAAY,EAAA,QAAA,CAAA,GAAAL,EAAA,SAAAP,EAAA,EAAyCY,EAC1CnB,EAAC,CAAA,GAbL,CAAoB,oBAAAG,EAClB,MAAAF,CACA,EAYQ,GAAA,KACD,GAAA,KACA,EAAA,KACD,KAAA,OACG,YAAA,GACO,CAAA,CACd,CAAA,CAAA,CAGN,CAEAG,EAAA,YAAA"}