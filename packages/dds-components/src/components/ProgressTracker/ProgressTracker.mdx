import { ArgTypes, Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ProgressTrackerStories from './ProgressTracker.stories';
import * as ProgressTrackerFormStories from './ProgressTrackerForm.stories';
import { ProgressTracker, ProgressTrackerItem } from '.';
import {
  Source,
  ComponentLinkRow,
} from '@norges-domstoler/storybook-components';
import { Tabs, TabList, Tab, TabPanels, TabPanel } from '../Tabs';

<Meta of={ProgressTrackerStories} />

# ProgressTracker

<ComponentLinkRow
  docsHref="https://design.domstol.no/987b33f71/p/206fdc-skiptocontent/b/11d1c4"
  figmaHref="https://www.figma.com/file/ewqSDmkgqDQ5PyOsRp4V5b/DDS-Komponenter?node-id=10018%3A211463"
  githubHref="https://github.com/domstolene/designsystem/tree/main/packages/components/src/components/ProgressTracker"
  storybookHref="https://domstolene.github.io/designsystem/?path=/story/dds-components-components-progresstracker--default"
/>

## Delkomponenter

<Tabs>
  <TabList>
    <Tab>ProgressTracker</Tab>
    <Tab>ProgressTracker.Item</Tab>
  </TabList>
  <TabPanels>
    <TabPanel>
      Ytterste container som styrer hvilket steg skal vises via indeks. Har to eller flere `<ProgressTracker.Item>` som barn. Håndterer oppførsel og eventuelt litt styling.
      <Canvas of={ProgressTrackerStories.Preview} />
      <Controls of={ProgressTrackerStories.Preview} />
    </TabPanel>
    <TabPanel>
      Et steg. Ikke-compound variant er også støttet: `<ProgressTrackerItem>`.

      <ArgTypes of={ProgressTrackerItem} />
    </TabPanel>

  </TabPanels>
</Tabs>

## Bruk

<Source
  code={`
const [activeStep, setActiveStep] = useState(0);
const [completedSteps, setCompletedSteps] = useState(new Set());

function handleCompleted() {
// ...din kode for fullført steg...
setCompletedSteps(s => new Set([...s, activeStep]));
}

function onStepChange(index: number) {
handleCompleted();
setActiveStep(index);
}

return (

<div>
  <ProgressTracker
    activeStep={activeStep}
    onStepChange={step => onStepChange(step)}
  >
    <ProgressTracker.Item completed={completedSteps.has(0)}>
      Steg 1
    </ProgressTracker.Item>
    <ProgressTracker.Item completed={completedSteps.has(1)}>
      Steg 2
    </ProgressTracker.Item>
    <ProgressTracker.Item> Sammendrag </ProgressTracker.Item>
  </ProgressTracker>
  <div>
    {activeStep === 0 && <div> Steg 1 </div>}
    {activeStep === 1 && <div> Steg 2 </div>}
    {activeStep === 2 && <div> Sammendrag </div>}
  </div>
</div>
) `} />

## Eksempler

<Tabs>
  <TabList>
    <Tab>Med ikoner</Tab>
    <Tab>Horisontal</Tab>
    <Tab>Liten skjerm</Tab>
    <Tab>Skjema</Tab>
    <Tab>Skjema custom grid</Tab>
  </TabList>
  <TabPanels>
    <TabPanel>
      <Canvas of={ProgressTrackerStories.WithIcons} />
    </TabPanel>
    <TabPanel>
      <Canvas of={ProgressTrackerStories.Horisontal} />
    </TabPanel>
    <TabPanel>
      <Canvas of={ProgressTrackerStories.SmallScreen} />
    </TabPanel>
    <TabPanel>
      Se detaljer i [Patterns |
      Form](https://domstolene.github.io/designsystem/?path=/docs/patterns-form--docs).
      <Canvas of={ProgressTrackerFormStories.FormWithSteps} />
    </TabPanel>
    <TabPanel>
      Se detaljer i [Patterns |
      Form](https://domstolene.github.io/designsystem/?path=/docs/patterns-form--docs).
      <Canvas of={ProgressTrackerFormStories.FormWithStepsCustomGrid} />
    </TabPanel>
  </TabPanels>
</Tabs>
