import {
  Meta,
  ArgTypes,
  PRIMARY_STORY,
  Canvas,
  Story,
} from '@storybook/blocks';
import { Tooltip } from '.';
import {
  Source,
  ComponentLinkRow,
  SB_DESIGNSYSTEM_URL,
  LinkToInteractiveStory,
} from '@norges-domstoler/storybook-components';
import { Table } from '../Table';
import * as TooltipStories from './Tooltip.stories';

<Meta of={TooltipStories} />

# Tooltip

<ComponentLinkRow
  docsHref="https://design.domstol.no/987b33f71/p/815808-tooltip/b/93bc8f"
  figmaHref="https://www.figma.com/file/ewqSDmkgqDQ5PyOsRp4V5b/?node-id=4985%3A127667"
  githubHref="https://github.com/domstolene/designsystem/tree/main/packages/components/src/components/Tooltip"
/>

## Demo

<Canvas>
  {/* <Story id="dds-components-tooltip--default" /> is deprecated, please migrate it to <Story of={referenceToStory} /> see: https://storybook.js.org/migration-guides/7.0 */}

  <Story id="dds-components-tooltip--default" />
</Canvas>

<LinkToInteractiveStory href={`${SB_DESIGNSYSTEM_URL}dds-components-tooltip`} />

## Oversikt

En tooltip består av:

- `<Tooltip />`- wrapper som håndterer kontroll og rendering av tooltip
- Valgfritt anchor element som skal være det eneste barnet til `<Tooltip />`. Det kontrollerer når tooltip vises via tastaturfokus og tooltip plasseres i forhold til dette elementet. Et anchor element er et interaktivt element. `<Tooltip />` sender enkelte props til anchor-elementet som ikke kan overskrives, som `aria-describedby` og `ref`.

`<Tooltip />` returnerer anchor elementet og en tooltip wrappet i en `<div>`.

## Bruk i koden

<Source
  code={`import { Tooltip, Button } from '@norges-domstoler/dds-components';

<Tooltip text="Tooltip">
  <Button>tekst</Button>
</Tooltip>
`} />

## API

<ArgTypes story={PRIMARY_STORY} />

I tillegg støttes alle native HTML-attributter som er en del av `HTMLAttributes<HTMLDivElement>`-interface i `htmlProps`.

### Events

Det brukes ulike events til å lukke eller åpne tooltip. For å bruke callback på event som styrer tooltip må den sendes som prop til riktig element. Se oversikt over hvilket element bruker hvilken event:

<Table.Wrapper>
  <Table density="compact" style={{ width: '100%' }}>
    <Table.Head>
      <Table.Row type="head">
        <Table.Cell type="head">Event</Table.Cell>
        <Table.Cell type="head">`Tooltip`</Table.Cell>
        <Table.Cell type="head">Anchor-element</Table.Cell>
      </Table.Row>
    </Table.Head>

    <Table.Body>
      <Table.Row>
        <Table.Cell> `onMouseOver` </Table.Cell>
        <Table.Cell> ✅ </Table.Cell>

        <Table.Cell />
      </Table.Row>

      <Table.Row>
        <Table.Cell> `onMouseLeave`</Table.Cell>
        <Table.Cell> ✅ </Table.Cell>

        <Table.Cell />
      </Table.Row>

      <Table.Row>
        <Table.Cell> `onFocus` </Table.Cell>

        <Table.Cell />

        <Table.Cell> ✅ </Table.Cell>
      </Table.Row>

      <Table.Row>
        <Table.Cell> `onBlur` </Table.Cell>

        <Table.Cell />

        <Table.Cell> ✅ </Table.Cell>
      </Table.Row>
    </Table.Body>

  </Table>
</Table.Wrapper>

#### Eksempel

<Source
  code={`const onFocus = () => { ... } // noe logikk
  const onMouseOver = () => { ... } // noe logikk

<Tooltip text="Tooltip" onMouseOver={onMouseOver}>
  <Button onFocus={onFocus}>tekst</Button>
</Tooltip>
`} />

## Retningslinjer

- `<Tooltip />` brukes kun til kort tekst. Ingen interaktive elementer er tillatt. Sjekk Popover for andre bruksområder.
- Hvis anchor element er et ikon bruk `Button` med `Icon`-prop der det er mulig.
- Husk tilgjengelig ledetekst i anchor element som ikke har synlig tekst i seg.
- Sørg for at `<Tooltip />` brukes konsekvent i løsningen.
- Sørg for at `<Tooltip />` får riktig plassering i forhold til resten av innholdet og ikke dekker til relatert informasjon.
