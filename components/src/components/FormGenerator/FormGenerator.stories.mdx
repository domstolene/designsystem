import {
  Story,
  Canvas,
  Meta,
  ArgsTable,
  PRIMARY_STORY,
} from '@storybook/addon-docs';
import { FormGenerator } from '.';
import {
  Source,
  ComponentLinkRow,
  LinkToInteractiveStory,
  SB_DESIGNSYSTEM_URL,
} from '../../storybook';

<Meta title="Design system/FormGenerator BETA/API" component={FormGenerator} />

# FormGenerator BETA

<ComponentLinkRow githubHref="https://github.com/domstolene/designsystem/tree/master/components/src/components/FormGenerator" />

## Demo

<Canvas>
  <Story id="design-system-formgenerator-beta--default" />
</Canvas>

<LinkToInteractiveStory href={`${SB_DESIGNSYSTEM_URL}-formgenerator`} />

## Intro

Komponenten er tenkt for skjemabygging og lett vedlikehold på skjema. Komponenten tar seg av både responsivt design og state-håndtering.
Man definerer ett felt eller en rad med flere felter, avhengig av hvordan skjemaet skal se ut. Se dokumentasjon lenger ned for hva som kreves for ett felt og en rad med felter.

## Bruk i koden

<Source code={`

import { FormGenerator, FormGeneratorSupportedFields } from '@norges-domstoler/dds-components';

const fields = [{
    rowType: 'standard',
    breakpoint: ScreenSize.Small,
    fields: [
    {
        component: FormGeneratorSupportedFields.TextInput,
        props: {
            label: 'Fornavn',
            type: 'text',
            name: 'firstName',
        },
    },
    {
        component: FormGeneratorSupportedFields.TextInput,
        props: {
            label: 'Etternavn',
            type: 'text',
            name: 'lastName',
        },
    }],
},
{
    component: FormGeneratorSupportedFields.RadioButtonGroup,
    props: {
        label: 'Kjønn',
        name: 'kjønn',
    },
    children: [{
        component: FormGeneratorSupportedFields.RadioButton,
        props: {
            label: 'Kvinne',
            value: 'female',
        },
    },
    {
        component: FormGeneratorSupportedFields.RadioButton,
        props: {
            label: 'Mann',
            value: 'male',
        },
    },
    {
        component: FormGeneratorSupportedFields.RadioButton,
        props: {
            label: 'Annet',
            value: 'other',
        },
    }],
}];

const stateOnChange = (newState: object) => {
    console.log(newState);
}

<FormGenerator fields={fields} stateOnChange={stateOnChange} />

`} />

## API

<ArgsTable story={PRIMARY_STORY} />

## Types

<Source code={`

type FormGeneratorRow = {
  rowType: 'button' | 'standard';
  breakpoint?: ScreenSize;
  fields: FormGeneratorField[];
};

type FormGeneratorField = FieldWithChildren | FieldWithoutChildren;

`}/>

#### FieldWithChildren

<Source code={`

type FieldWithChildren =
  | CheckboxGroupField
  | ListField
  | RadioButtonGroupField
  | ToggleButtonGroupField;

type CheckboxGroupField = {
  component: FormGeneratorSupportedFields.CheckboxGroup;
  props: CheckboxGroupProps;
  hide?: boolean;
  children: CheckboxField[];
};
`} />

#### FieldWithoutChildren

<Source code={`

type FieldWithoutChildren =
  | ButtonField
  | CardField
  | CheckboxField
  | DatepickerField
  | DividerField
  | GlobalMessageField
  | HeadingField
  | InputMessageField
  | LabelField
  | LinkField
  | ListItemField
  | LocalMessageField
  | ParagraphField
  | RadioButtonField
  | SelectField
  | SpinnerField
  | TextInputField
  | ToggleButtonField
  | TypographyField
  | VisuallyHiddenField;

type ButtonField = {
  component: FormGeneratorSupportedFields.Button;
  props: ButtonProps;
  hide?: boolean;
};

type CardField = {
  component: FormGeneratorSupportedFields.Card;
  props: CardProps;
  hide?: boolean;
  innerHTML: JSX.Element | string;
};
`} />

## Retningslinjer

- Ved bruk av `rowType: button`, skal denne raden i utgangspunktet plasseres nederst i skjemaet. Ved unntak, må man påregne egen styling for å få korrekt avstand til raden over.
- Om man ønsker å sette `breakpoint`, skal det defineres med enumen `ScreenSize` som finnes i hooken `useScreenSize.tsx`
- Vi ønsker å standardisere hvordan enkelte skjema skal se ut, f.eks. personalia og adresser. Se gjerne i `Examples` eller hør med andre team hvordan det er satt opp.