name: Generate style variables from design tokens in PR

on:
    pull_request:
        paths:
            - "packages/dds-tokens/dds/tokens/**/*.json"

permissions:
    contents: write

jobs:
    tokens:
        runs-on: ubuntu-latest
        timeout-minutes: 10

        steps:
            - name: Checkout PR branch
              uses: actions/checkout@v4
              with:
                  ref: ${{ github.event.pull_request.head.ref }}

            - name: Install
              uses: ./.github/composite-actions/install

            - name: Generate tokens
              run: pnpm generate:tokens

            - name: Commit generated tokens
              uses: EndBug/add-and-commit@v9
              with:
                  author_name: AgataJedryszek-da
                  author_email: agata.jedryszek@domstol.no
                  message: "Genererer stilvariabler i CSS, SCSS og JS basert p√• endringer i design tokens"
                  add: "packages/dds-tokens/generated-tokens/"
